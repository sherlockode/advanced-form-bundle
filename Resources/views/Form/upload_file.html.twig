{% block afb_file_widget %}
    <div class="afb_file_container" {{ block('data_attributes') }}>
        {{ block('dropzone') }}
        {{ block('file_list') }}
    </div>
{% endblock %}

{% block data_attributes %}
    data-uploadurl="{{ uploadUriPath|e }}"
    data-removeurl="{{ removeUriPath|e }}"
    data-removetmpurl="{{ removeTmpUriPath|e }}"
    data-name="{{ name|e }}"
    data-mapping="{{ mapping|e }}"
    data-upload-mode="{{ uploadMode }}"
    {% if multiple %}
        data-multiple="true"
    {% endif %}
    {% if subject.id %}
        data-id="{{ subject.id|e }}"
    {% endif %}
    {% if jsCallback %}
        data-callback="{{ jsCallback|e }}"
    {% endif %}
    {% if imagePreview %}
        data-imgpreview="true"
    {% endif %}
{% endblock %}

{% block dropzone %}
    <div class="afb_dropzone"{% if files|length > 0 and false == multiple %} style="display:none"{% endif %}>
        <label for="afb_file_input-{{ id }}">{{ label|trans({}, translation_domain) }}</label>
        <input type="file" {% if multiple %}multiple{% endif %} class="afb_file_input" id="afb_file_input-{{ id }}"/>
    </div>
{% endblock %}

{% block file_list %}
    {% set i = 0 %}
    <ul class="{% if imagePreview %}afb_upload_preview{% endif %} afb_upload_container">
        {% for file in files %}
            {% set i = i + 1 %}
            <li class="{% if imagePreview %}afb_preview_item{% endif %} afb_item afb_preview_{{ i }}" data-upload="{{ i }}">
                {{ block('file_info') }}
            </li>
        {% endfor %}
    </ul>
{% endblock %}

{% block file_info %}
    {% if imagePreview %}
        <div class="afb_file_preview">
            <img src="{{ sherlockode_afb_asset(mapping, file.id) }}" />
        </div>
    {% endif %}
    <div class="afb_filename upload-details">{{ sherlockode_afb_filename(mapping, file) }}</div>
    <a class="afb_remove_file upload-details" href="#" data-upload="{{ i }}" data-id="{{ file.id }}">X</a>
{% endblock %}
